<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Sistema de Controle WFA</title>

<style>
body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    padding: 20px;
}

h1 {
    text-align: center;
}

.container {
    background: white;
    padding: 20px;
    border-radius: 10px;
    margin-bottom: 20px;
}

input, select, button {
    padding: 8px;
    margin: 5px;
}

button {
    background-color: #000;
    color: white;
    border: none;
    cursor: pointer;
}

button:hover {
    background-color: #444;
}

table {
    width: 100%;
    border-collapse: collapse;
}

th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: center;
}

th {
    background-color: #000;
    color: white;
}

.dashboard {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
}

.card {
    background: #eee;
    padding: 15px;
    border-radius: 8px;
    min-width: 150px;
    text-align: center;
}
</style>
</head>

<body>

<h1>Controle de WFA - Arezzo</h1>

<div class="container">
<h3>Cadastro de WFA</h3>

<input type="text" id="cliente" placeholder="Nome da Cliente">
<input type="text" id="produto" placeholder="Produto">
<input type="text" id="defeito" placeholder="Tipo de Defeito">

<select id="status">
<option>Recebido</option>
<option>Enviado para análise</option>
<option>Em análise</option>
<option>Aprovado</option>
<option>Reprovado</option>
<option>Entregue ao cliente</option>
</select>

<button onclick="adicionarWFA()">Cadastrar</button>
</div>

<div class="container">
<h3>Lista de WFAs</h3>
<table>
<thead>
<tr>
<th>Cliente</th>
<th>Produto</th>
<th>Defeito</th>
<th>Status</th>
<th>Alterar</th>
</tr>
</thead>
<tbody id="tabela"></tbody>
</table>
</div>

<div class="container">
<h3>Dashboard</h3>
<div class="dashboard" id="dashboard"></div>
</div>

<script>

let wfas = JSON.parse(localStorage.getItem("wfas")) || [];

function salvar() {
    localStorage.setItem("wfas", JSON.stringify(wfas));
}

function adicionarWFA() {
    const cliente = document.getElementById("cliente").value;
    const produto = document.getElementById("produto").value;
    const defeito = document.getElementById("defeito").value;
    const status = document.getElementById("status").value;

    if(cliente === "" || produto === "" || defeito === "") {
        alert("Preencha todos os campos!");
        return;
    }

    wfas.push({ cliente, produto, defeito, status });
    salvar();
    atualizarTabela();
    atualizarDashboard();

    document.getElementById("cliente").value = "";
    document.getElementById("produto").value = "";
    document.getElementById("defeito").value = "";
}

function atualizarTabela() {
    const tabela = document.getElementById("tabela");
    tabela.innerHTML = "";

    wfas.forEach((wfa, index) => {
        tabela.innerHTML += `
        <tr>
            <td>${wfa.cliente}</td>
            <td>${wfa.produto}</td>
            <td>${wfa.defeito}</td>
            <td>
                <select onchange="alterarStatus(${index}, this.value)">
                    <option ${wfa.status === "Recebido" ? "selected" : ""}>Recebido</option>
                    <option ${wfa.status === "Enviado para análise" ? "selected" : ""}>Enviado para análise</option>
                    <option ${wfa.status === "Em análise" ? "selected" : ""}>Em análise</option>
                    <option ${wfa.status === "Aprovado" ? "selected" : ""}>Aprovado</option>
                    <option ${wfa.status === "Reprovado" ? "selected" : ""}>Reprovado</option>
                    <option ${wfa.status === "Entregue ao cliente" ? "selected" : ""}>Entregue ao cliente</option>
                </select>
            </td>
            <td><button onclick="remover(${index})">Excluir</button></td>
        </tr>`;
    });
}

function alterarStatus(index, novoStatus) {
    wfas[index].status = novoStatus;
    salvar();
    atualizarDashboard();
}

function remover(index) {
    wfas.splice(index, 1);
    salvar();
    atualizarTabela();
    atualizarDashboard();
}

function atualizarDashboard() {
    const dashboard = document.getElementById("dashboard");

    const statusList = [
        "Recebido",
        "Enviado para análise",
        "Em análise",
        "Aprovado",
        "Reprovado",
        "Entregue ao cliente"
    ];

    dashboard.innerHTML = "";

    statusList.forEach(status => {
        const total = wfas.filter(wfa => wfa.status === status).length;

        dashboard.innerHTML += `
        <div class="card">
            <h4>${status}</h4>
            <p>${total}</p>
        </div>`;
    });
}

atualizarTabela();
atualizarDashboard();

</script>

</body>
</html>
